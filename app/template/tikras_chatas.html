
{% extends "base.html" %}

{% block title %}LLM Chat{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-4 text-gray-800">LLM Chat</h1>
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Conversation</h6>
        </div>
        <div class="card-body">
            <div class="chat-box" id="chatBox">
                <div class="message-container">
                    <div class="chat-message llm-message">
                        Hello! How can I help you today?
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <div class="input-group">
                    <textarea id="userInput" class="form-control" placeholder="Type your message..." rows="2"></textarea>
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="button" id="sendMessageBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    const sendMessageBtn = document.getElementById('sendMessageBtn');

    function addMessage(message, sender) {
        const messageContainer = document.createElement('div');
        messageContainer.classList.add('message-container');

        const messageElement = document.createElement('div');
        messageElement.classList.add('chat-message', sender === 'user' ? 'user-message' : 'llm-message');
        messageElement.innerText = message;

        messageContainer.appendChild(messageElement);
        chatBox.appendChild(messageContainer);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function handleSendMessage() {
        const message = userInput.value.trim();
        if (message === '') return;

        addMessage(message, 'user');
        userInput.value = '';

        // Simulated bot response
        setTimeout(() => {
            const llmResponse = "This is a simulated response from the LLM.";
            addMessage(llmResponse, 'llm');
        }, 800);
    }

    sendMessageBtn.addEventListener('click', handleSendMessage);
    userInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            handleSendMessage();
        }
    });
</script>
{% endblock %}
